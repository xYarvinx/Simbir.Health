Index: hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hospitalmicroservice.config;\r\n\r\n\r\nimport com.example.hospitalmicroservice.dto.Error;\r\nimport com.example.hospitalmicroservice.dto.ErrorResponse;\r\nimport com.example.hospitalmicroservice.dto.TokenValidationResponse;\r\nimport com.example.hospitalmicroservice.service.RabbitService;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport java.io.IOException;\r\n\r\n\r\n@Component\r\n@AllArgsConstructor\r\npublic class JwtFilter extends OncePerRequestFilter {\r\n    private final RabbitService rabbitService;\r\n    private final ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        final String token = extractToken(request);\r\n        if (token != null) {\r\n            try {\r\n                TokenValidationResponse validationResponse = rabbitService.sendTokenValidationRequest(token);\r\n                if (!validationResponse.isValid()) {\r\n                    sendErrorResponse(response, HttpServletResponse.SC_UNAUTHORIZED, \"Invalid or expired token\");\r\n                    return;\r\n                }\r\n            } catch (Exception e) {\r\n                sendErrorResponse(response, HttpServletResponse.SC_INTERNAL_SERVER_ERROR, \"Internal server error occurred\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private void sendErrorResponse(HttpServletResponse response, int status, String message) throws IOException {\r\n        response.setStatus(status);\r\n        response.setContentType(\"application/json\");\r\n        ErrorResponse errorResponse = ErrorResponse.builder()\r\n                .error(Error.builder()\r\n                        .message(message)\r\n                        .build())\r\n                .build();\r\n        String jsonResponse = objectMapper.writeValueAsString(errorResponse);\r\n        response.getWriter().write(jsonResponse);\r\n    }\r\n\r\n    private String extractToken(HttpServletRequest request) {\r\n        String bearerToken = request.getHeader(\"Authorization\");\r\n        if (bearerToken != null && bearerToken.startsWith(\"Bearer \")) {\r\n            return bearerToken.substring(7);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java
--- a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java	(revision 81d0268218d4226a69595a554e3f3e45afb58405)
+++ b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java	(date 1728921728857)
@@ -11,11 +11,16 @@
 import jakarta.servlet.http.HttpServletRequest;
 import jakarta.servlet.http.HttpServletResponse;
 import lombok.AllArgsConstructor;
+import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
+import org.springframework.security.core.Authentication;
+import org.springframework.security.core.context.SecurityContext;
+import org.springframework.security.core.context.SecurityContextHolder;
 import org.springframework.stereotype.Component;
 
 import org.springframework.web.filter.OncePerRequestFilter;
 
 import java.io.IOException;
+import java.util.Collections;
 
 
 @Component
@@ -34,6 +39,12 @@
                     sendErrorResponse(response, HttpServletResponse.SC_UNAUTHORIZED, "Invalid or expired token");
                     return;
                 }
+                Authentication authentication = new UsernamePasswordAuthenticationToken(
+                        validationResponse.getCorrelationId(),
+                        null,
+                        Collections.emptyList()
+                );
+                SecurityContextHolder.getContext().setAuthentication(authentication);
             } catch (Exception e) {
                 sendErrorResponse(response, HttpServletResponse.SC_INTERNAL_SERVER_ERROR, "Internal server error occurred");
                 return;
Index: hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hospitalmicroservice.service;\r\n\r\n\r\nimport com.example.hospitalmicroservice.dto.TokenValidationRequest;\r\nimport com.example.hospitalmicroservice.dto.TokenValidationResponse;\r\nimport org.springframework.amqp.core.Message;\r\nimport org.springframework.amqp.rabbit.core.RabbitTemplate;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.UUID;\r\n\r\n@Service\r\npublic class RabbitService {\r\n    private final RabbitTemplate rabbitTemplate;\r\n\r\n    public RabbitService(RabbitTemplate rabbitTemplate) {\r\n        this.rabbitTemplate = rabbitTemplate;\r\n    }\r\n\r\n    public com.example.hospitalmicroservice.dto.TokenValidationResponse sendTokenValidationRequest(String token) {\r\n        String correlationId = UUID.randomUUID().toString();\r\n\r\n\r\n        TokenValidationRequest request = new TokenValidationRequest(token, correlationId);\r\n\r\n        rabbitTemplate.convertAndSend(\"authExchange\", \"auth.request\", request);\r\n        Message message = rabbitTemplate.receive(\"authResponseQueue\", 5000);\r\n        if (message != null) {\r\n            TokenValidationResponse response = (TokenValidationResponse) rabbitTemplate.getMessageConverter().fromMessage(message);\r\n            return response;\r\n        } else {\r\n            throw new RuntimeException(\"No response received within timeout period\");\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java
--- a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java	(revision 81d0268218d4226a69595a554e3f3e45afb58405)
+++ b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java	(date 1728922061477)
@@ -3,6 +3,7 @@
 
 import com.example.hospitalmicroservice.dto.TokenValidationRequest;
 import com.example.hospitalmicroservice.dto.TokenValidationResponse;
+import lombok.AllArgsConstructor;
 import org.springframework.amqp.core.Message;
 import org.springframework.amqp.rabbit.core.RabbitTemplate;
 import org.springframework.stereotype.Service;
@@ -10,14 +11,11 @@
 import java.util.UUID;
 
 @Service
+@AllArgsConstructor
 public class RabbitService {
     private final RabbitTemplate rabbitTemplate;
 
-    public RabbitService(RabbitTemplate rabbitTemplate) {
-        this.rabbitTemplate = rabbitTemplate;
-    }
-
-    public com.example.hospitalmicroservice.dto.TokenValidationResponse sendTokenValidationRequest(String token) {
+    public TokenValidationResponse sendTokenValidationRequest(String token) {
         String correlationId = UUID.randomUUID().toString();
 
 
@@ -26,8 +24,7 @@
         rabbitTemplate.convertAndSend("authExchange", "auth.request", request);
         Message message = rabbitTemplate.receive("authResponseQueue", 5000);
         if (message != null) {
-            TokenValidationResponse response = (TokenValidationResponse) rabbitTemplate.getMessageConverter().fromMessage(message);
-            return response;
+            return (TokenValidationResponse) rabbitTemplate.getMessageConverter().fromMessage(message);
         } else {
             throw new RuntimeException("No response received within timeout period");
         }
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"6e19d754-f49e-4369-9aa4-5710a03aa6d9\" name=\"Changes\" comment=\"Some fixes(part don't work)\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/account-microservice\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/account-microservice\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/account-microservice/src/main/java/com/example/accountmicroservice/config/SecurityConfiguration.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/account-microservice/src/main/java/com/example/accountmicroservice/config/SecurityConfiguration.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/hospital-microservice\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/hospital-microservice\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ChangesViewManager\" show_ignored=\"true\">\r\n    <option name=\"groupingKeys\">\r\n      <option value=\"directory\" />\r\n      <option value=\"module\" />\r\n      <option value=\"repository\" />\r\n    </option>\r\n  </component>\r\n  <component name=\"ExternalProjectsData\">\r\n    <projectState path=\"$PROJECT_DIR$/timetable-microservice\">\r\n      <ProjectState />\r\n    </projectState>\r\n  </component>\r\n  <component name=\"ExternalProjectsManager\">\r\n    <system id=\"GRADLE\">\r\n      <state>\r\n        <task path=\"$PROJECT_DIR$/timetable-microservice\">\r\n          <activation />\r\n        </task>\r\n        <projects_view>\r\n          <tree_state>\r\n            <expand />\r\n            <select />\r\n          </tree_state>\r\n        </projects_view>\r\n      </state>\r\n    </system>\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Dockerfile\" />\r\n        <option value=\"Enum\" />\r\n        <option value=\"com.intellij.jpb.FlywayMigrationScript\" />\r\n        <option value=\"Exception\" />\r\n        <option value=\"Interface\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n    <option name=\"ROOT_SYNC\" value=\"SYNC\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;xYarvinx&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/xYarvinx/Simbir.Health.git&quot;,\r\n    &quot;accountId&quot;: &quot;786a94b7-c867-4ea9-ace3-e36a89dea65d&quot;\r\n  }\r\n}</component>\r\n  <component name=\"JpbToolWindowState\">\r\n    <option name=\"isToolWindowVisible\" value=\"false\" />\r\n  </component>\r\n  <component name=\"KubernetesApiPersistence\">{}</component>\r\n  <component name=\"KubernetesApiProvider\">{\r\n  &quot;isMigrated&quot;: true\r\n}</component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 0\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2mJSEPZfI6tE0LiLpMzRyu4QZZY\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"HTTP Request.generated-requests | #36.executor\": \"Run\",\r\n    \"HTTP Request.generated-requests | #37.executor\": \"Run\",\r\n    \"Remote JVM Debug.Unnamed.executor\": \"Debug\",\r\n    \"RequestMappingsPanelOrder0\": \"0\",\r\n    \"RequestMappingsPanelOrder1\": \"1\",\r\n    \"RequestMappingsPanelWidth0\": \"75\",\r\n    \"RequestMappingsPanelWidth1\": \"75\",\r\n    \"RunOnceActivity.OpenProjectViewOnStart\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"SHARE_PROJECT_CONFIGURATION_FILES\": \"true\",\r\n    \"Spring Boot.AccountMicroserviceApplication.executor\": \"Run\",\r\n    \"Spring Boot.HospitalMicroserviceApplication.executor\": \"Run\",\r\n    \"WebServerToolWindowFactoryState\": \"false\",\r\n    \"extract.method.default.visibility\": \"private\",\r\n    \"git-widget-placeholder\": \"master\",\r\n    \"jdk.selected.JAVA_MODULE\": \"openjdk-21\",\r\n    \"kotlin-language-version-configured\": \"true\",\r\n    \"last_opened_file_path\": \"C:/Users/oteba/IdeaProjects/Simbir.Health/hospital-microservice/src/main/java/com/example/hospitalmicroservice/dto\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"nodejs_package_manager_path\": \"npm\",\r\n    \"project.structure.last.edited\": \"Modules\",\r\n    \"project.structure.proportion\": \"0.15\",\r\n    \"project.structure.side.proportion\": \"0.2\",\r\n    \"run.configurations.included.in.services\": \"true\",\r\n    \"settings.editor.selected.configurable\": \"advanced.settings\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"ReactorSettings\">\r\n    <option name=\"notificationShown\" value=\"true\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CreateClassDialog.RecentsKey\">\r\n      <recent name=\"com.example.hospitalmicroservice.dto\" />\r\n      <recent name=\"com.example.accountmicroservice.models\" />\r\n    </key>\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\oteba\\IdeaProjects\\Simbir.Health\\hospital-microservice\\src\\main\\java\\com\\example\\hospitalmicroservice\\dto\" />\r\n      <recent name=\"C:\\Users\\oteba\\IdeaProjects\\Simbir.Health\\hospital-microservice\\src\\main\\java\\com\\example\\hospitalmicroservice\\exception\" />\r\n      <recent name=\"C:\\Users\\oteba\\IdeaProjects\\Simbir.Health\\hospital-microservice\\src\\main\\java\\com\\example\\hospitalmicroservice\\config\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"com.example.hospitalmicroservice.config\" />\r\n      <recent name=\"com.example.hospitalmicroservice.exception\" />\r\n      <recent name=\"com.example.hospitalmicroservice.dto\" />\r\n      <recent name=\"com.example.accountmicroservice.dto\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunDashboard\">\r\n    <option name=\"configurationTypes\">\r\n      <set>\r\n        <option value=\"MicronautRunConfigurationType\" />\r\n        <option value=\"QuarkusRunConfigurationType\" />\r\n        <option value=\"SpringBootApplicationConfigurationType\" />\r\n      </set>\r\n    </option>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Spring Boot.HospitalMicroserviceApplication\">\r\n    <configuration name=\"generated-requests | #36\" type=\"HttpClient.HttpRequestRunConfigurationType\" factoryName=\"HTTP Request\" temporary=\"true\" nameIsGenerated=\"true\" path=\"$APPLICATION_CONFIG_DIR$/scratches/generated-requests.http\" index=\"36\" requestIdentifier=\"#36\" runType=\"Run single request\">\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"generated-requests | #37\" type=\"HttpClient.HttpRequestRunConfigurationType\" factoryName=\"HTTP Request\" temporary=\"true\" nameIsGenerated=\"true\" path=\"$APPLICATION_CONFIG_DIR$/scratches/generated-requests.http\" index=\"37\" requestIdentifier=\"#37\" runType=\"Run single request\">\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"Unnamed\" type=\"Remote\" nameIsGenerated=\"true\">\r\n      <module name=\"hospital-microservice\" />\r\n      <option name=\"USE_SOCKET_TRANSPORT\" value=\"true\" />\r\n      <option name=\"SERVER_MODE\" value=\"false\" />\r\n      <option name=\"SHMEM_ADDRESS\" />\r\n      <option name=\"HOST\" value=\"localhost\" />\r\n      <option name=\"PORT\" value=\"5005\" />\r\n      <option name=\"AUTO_RESTART\" value=\"false\" />\r\n      <RunnerSettings RunnerId=\"Debug\">\r\n        <option name=\"DEBUG_PORT\" value=\"5005\" />\r\n        <option name=\"LOCAL\" value=\"false\" />\r\n      </RunnerSettings>\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"AccountMicroserviceApplication\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" nameIsGenerated=\"true\">\r\n      <option name=\"ALTERNATIVE_JRE_PATH\" value=\"21\" />\r\n      <option name=\"ALTERNATIVE_JRE_PATH_ENABLED\" value=\"true\" />\r\n      <module name=\"account-microservice\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.example.accountmicroservice.AccountMicroserviceApplication\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"DocumentMicroserviceApplication\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" nameIsGenerated=\"true\">\r\n      <module name=\"document-microservice\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.example.documentmicroservice.DocumentMicroserviceApplication\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"HospitalMicroserviceApplication\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" nameIsGenerated=\"true\">\r\n      <module name=\"hospital-microservice\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.example.hospitalmicroservice.HospitalMicroserviceApplication\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"TimetableMicroserviceApplication\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" nameIsGenerated=\"true\">\r\n      <module name=\"timetable-microservice\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.example.timetablemicroservice.TimetableMicroserviceApplication\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"HTTP Request.generated-requests | #36\" />\r\n      <item itemvalue=\"HTTP Request.generated-requests | #37\" />\r\n      <item itemvalue=\"Remote JVM Debug.Unnamed\" />\r\n      <item itemvalue=\"Spring Boot.AccountMicroserviceApplication\" />\r\n      <item itemvalue=\"Spring Boot.DocumentMicroserviceApplication\" />\r\n      <item itemvalue=\"Spring Boot.HospitalMicroserviceApplication\" />\r\n      <item itemvalue=\"Spring Boot.TimetableMicroserviceApplication\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"HTTP Request.generated-requests | #37\" />\r\n        <item itemvalue=\"HTTP Request.generated-requests | #36\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-jdk-9823dce3aa75-28b599e66164-intellij.indexing.shared.core-IU-242.23339.11\" />\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-5c90d61e3bab-JavaScript-IU-242.23339.11\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"6e19d754-f49e-4369-9aa4-5710a03aa6d9\" name=\"Changes\" comment=\"\" />\r\n      <created>1726793073554</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1726793073554</updated>\r\n      <workItem from=\"1726793074552\" duration=\"1883000\" />\r\n      <workItem from=\"1726795014549\" duration=\"960000\" />\r\n      <workItem from=\"1726796002117\" duration=\"976000\" />\r\n      <workItem from=\"1727700026784\" duration=\"5164000\" />\r\n      <workItem from=\"1727783907363\" duration=\"1102000\" />\r\n      <workItem from=\"1727785787235\" duration=\"260000\" />\r\n      <workItem from=\"1727786143566\" duration=\"59000\" />\r\n      <workItem from=\"1727786458731\" duration=\"232000\" />\r\n      <workItem from=\"1727786718759\" duration=\"77000\" />\r\n      <workItem from=\"1727786821251\" duration=\"3429000\" />\r\n      <workItem from=\"1727871578686\" duration=\"7038000\" />\r\n      <workItem from=\"1728459675625\" duration=\"31000\" />\r\n      <workItem from=\"1728459728357\" duration=\"354000\" />\r\n      <workItem from=\"1728460104675\" duration=\"111000\" />\r\n      <workItem from=\"1728460247059\" duration=\"12141000\" />\r\n      <workItem from=\"1728541240575\" duration=\"4242000\" />\r\n      <workItem from=\"1728745021087\" duration=\"100000\" />\r\n      <workItem from=\"1728745266607\" duration=\"980000\" />\r\n      <workItem from=\"1728907036529\" duration=\"12292000\" />\r\n      <workItem from=\"1728919531557\" duration=\"1019000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726794255574</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726794255574</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726795041449</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726795041449</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726795114549</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726795114549</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726795305975</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726795305975</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726795413061</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726795413061</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726795525696</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726795525696</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726795529530</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726795529530</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726796041306</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726796041306</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1726796344565</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1726796344565</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"init commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727401163691</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727401163691</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"add /SignOut, Full working jwt auth\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727703476564</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727703476564</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"add /SignOut, Full working jwt auth\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727703782191</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727703782191</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"some exception sugar\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727704858021</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727704858021</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"some exception sugar\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727704891853</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727704891853</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"some exception sugar\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727705121574</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727705121574</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"some exception sugar\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727705155384</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727705155384</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00017\" summary=\"AuthenticationController Done ☑ ☑ ☑\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727788874572</created>\r\n      <option name=\"number\" value=\"00017\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727788874572</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00018\" summary=\"AuthenticationController Done ☑ ☑ ☑\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1727788952003</created>\r\n      <option name=\"number\" value=\"00018\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1727788952003</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00019\" summary=\"Add exception + some code fixes &amp;&amp; refactors\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728457878351</created>\r\n      <option name=\"number\" value=\"00019\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728457878351</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00020\" summary=\"Add exception + some code fixes &amp;&amp; refactors\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728457907611</created>\r\n      <option name=\"number\" value=\"00020\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00020\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728457907611</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00021\" summary=\"Add exception + some code fixes &amp;&amp; refactors\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728459085747</created>\r\n      <option name=\"number\" value=\"00021\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00021\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728459085747</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00022\" summary=\"Add exception + some code fixes &amp;&amp; refactors\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728459139527</created>\r\n      <option name=\"number\" value=\"00022\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00022\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728459139527</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00023\" summary=\"Add exception + some code fixes &amp;&amp; refactors\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728459236949</created>\r\n      <option name=\"number\" value=\"00023\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00023\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728459236949</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00024\" summary=\"fix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728459350429</created>\r\n      <option name=\"number\" value=\"00024\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00024\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728459350429</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00025\" summary=\"fix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728460472416</created>\r\n      <option name=\"number\" value=\"00025\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00025\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728460472416</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00026\" summary=\"fix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728460509884</created>\r\n      <option name=\"number\" value=\"00026\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00026\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728460509884</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00027\" summary=\"Done last DoctorController\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728473530951</created>\r\n      <option name=\"number\" value=\"00027\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00027\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728473530951</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00028\" summary=\"Done last DoctorController\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728473553265</created>\r\n      <option name=\"number\" value=\"00028\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00028\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728473553265</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00029\" summary=\"Add swagger doc\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728479246367</created>\r\n      <option name=\"number\" value=\"00029\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00029\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728479246367</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00030\" summary=\"add swagger Auth &amp;&amp; some descriptions\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728481000935</created>\r\n      <option name=\"number\" value=\"00030\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00030\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728481000935</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00031\" summary=\"Some minor changes\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728542918002</created>\r\n      <option name=\"number\" value=\"00031\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00031\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728542918002</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00032\" summary=\"Starter struct &amp;&amp; some needed classes\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728542969026</created>\r\n      <option name=\"number\" value=\"00032\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00032\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728542969026</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00033\" summary=\"upd microservices\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728543010941</created>\r\n      <option name=\"number\" value=\"00033\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00033\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728543010941</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00034\" summary=\"Some fixes(part don't work)\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1728919725566</created>\r\n      <option name=\"number\" value=\"00034\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00034\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1728919725566</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"35\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"init commit\" />\r\n    <MESSAGE value=\"add /SignOut, Full working jwt auth\" />\r\n    <MESSAGE value=\"some exception sugar\" />\r\n    <MESSAGE value=\"AuthenticationController Done ☑ ☑ ☑\" />\r\n    <MESSAGE value=\"Add exception + some code fixes &amp;&amp; refactors\" />\r\n    <MESSAGE value=\"fix\" />\r\n    <MESSAGE value=\"Done last DoctorController\" />\r\n    <MESSAGE value=\"Add swagger doc\" />\r\n    <MESSAGE value=\"add swagger Auth &amp;&amp; some descriptions\" />\r\n    <MESSAGE value=\"Some minor changes\" />\r\n    <MESSAGE value=\"Starter struct &amp;&amp; some needed classes\" />\r\n    <MESSAGE value=\"Some minor changes&#10;Starter struct &amp;&amp; some needed classes&#10;add swagger Auth &amp;&amp; some descriptions\" />\r\n    <MESSAGE value=\"upd microservices\" />\r\n    <MESSAGE value=\"Some fixes(part don't work)\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Some fixes(part don't work)\" />\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 12cb7528fdfab37ccae105b91009d99d37c3ef4b)
+++ b/.idea/workspace.xml	(date 1728984731236)
@@ -6,11 +6,10 @@
   <component name="ChangeListManager">
     <list default="true" id="6e19d754-f49e-4369-9aa4-5710a03aa6d9" name="Changes" comment="Some fixes(part don't work)">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/account-microservice" beforeDir="false" afterPath="$PROJECT_DIR$/account-microservice" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/account-microservice/src/main/java/com/example/accountmicroservice/config/SecurityConfiguration.java" beforeDir="false" afterPath="$PROJECT_DIR$/account-microservice/src/main/java/com/example/accountmicroservice/config/SecurityConfiguration.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/hospital-microservice" beforeDir="false" afterPath="$PROJECT_DIR$/hospital-microservice" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java" beforeDir="false" afterPath="$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/JwtFilter.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java" beforeDir="false" afterPath="$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java" beforeDir="false" afterPath="$PROJECT_DIR$/hospital-microservice/src/main/java/com/example/hospitalmicroservice/service/RabbitService.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -57,7 +56,7 @@
     </option>
   </component>
   <component name="Git.Settings">
-    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
+    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$/hospital-microservice" />
     <option name="ROOT_SYNC" value="SYNC" />
   </component>
   <component name="GitHubPullRequestSearchHistory">{
@@ -91,39 +90,39 @@
     <option name="hideEmptyMiddlePackages" value="true" />
     <option name="showLibraryContents" value="true" />
   </component>
-  <component name="PropertiesComponent"><![CDATA[{
-  "keyToString": {
-    "HTTP Request.generated-requests | #36.executor": "Run",
-    "HTTP Request.generated-requests | #37.executor": "Run",
-    "Remote JVM Debug.Unnamed.executor": "Debug",
-    "RequestMappingsPanelOrder0": "0",
-    "RequestMappingsPanelOrder1": "1",
-    "RequestMappingsPanelWidth0": "75",
-    "RequestMappingsPanelWidth1": "75",
-    "RunOnceActivity.OpenProjectViewOnStart": "true",
-    "RunOnceActivity.ShowReadmeOnStart": "true",
-    "SHARE_PROJECT_CONFIGURATION_FILES": "true",
-    "Spring Boot.AccountMicroserviceApplication.executor": "Run",
-    "Spring Boot.HospitalMicroserviceApplication.executor": "Run",
-    "WebServerToolWindowFactoryState": "false",
-    "extract.method.default.visibility": "private",
-    "git-widget-placeholder": "master",
-    "jdk.selected.JAVA_MODULE": "openjdk-21",
-    "kotlin-language-version-configured": "true",
-    "last_opened_file_path": "C:/Users/oteba/IdeaProjects/Simbir.Health/hospital-microservice/src/main/java/com/example/hospitalmicroservice/dto",
-    "node.js.detected.package.eslint": "true",
-    "node.js.detected.package.tslint": "true",
-    "node.js.selected.package.eslint": "(autodetect)",
-    "node.js.selected.package.tslint": "(autodetect)",
-    "nodejs_package_manager_path": "npm",
-    "project.structure.last.edited": "Modules",
-    "project.structure.proportion": "0.15",
-    "project.structure.side.proportion": "0.2",
-    "run.configurations.included.in.services": "true",
-    "settings.editor.selected.configurable": "advanced.settings",
-    "vue.rearranger.settings.migration": "true"
+  <component name="PropertiesComponent">{
+  &quot;keyToString&quot;: {
+    &quot;HTTP Request.generated-requests | #36.executor&quot;: &quot;Run&quot;,
+    &quot;HTTP Request.generated-requests | #37.executor&quot;: &quot;Run&quot;,
+    &quot;Remote JVM Debug.Unnamed.executor&quot;: &quot;Debug&quot;,
+    &quot;RequestMappingsPanelOrder0&quot;: &quot;0&quot;,
+    &quot;RequestMappingsPanelOrder1&quot;: &quot;1&quot;,
+    &quot;RequestMappingsPanelWidth0&quot;: &quot;75&quot;,
+    &quot;RequestMappingsPanelWidth1&quot;: &quot;75&quot;,
+    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
+    &quot;SHARE_PROJECT_CONFIGURATION_FILES&quot;: &quot;true&quot;,
+    &quot;Spring Boot.AccountMicroserviceApplication.executor&quot;: &quot;Run&quot;,
+    &quot;Spring Boot.HospitalMicroserviceApplication.executor&quot;: &quot;Run&quot;,
+    &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,
+    &quot;extract.method.default.visibility&quot;: &quot;private&quot;,
+    &quot;git-widget-placeholder&quot;: &quot;81d02682&quot;,
+    &quot;jdk.selected.JAVA_MODULE&quot;: &quot;openjdk-21&quot;,
+    &quot;kotlin-language-version-configured&quot;: &quot;true&quot;,
+    &quot;last_opened_file_path&quot;: &quot;C:/Users/oteba/IdeaProjects/Simbir.Health/hospital-microservice/src/main/java/com/example/hospitalmicroservice/dto&quot;,
+    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,
+    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,
+    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,
+    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,
+    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,
+    &quot;project.structure.last.edited&quot;: &quot;Modules&quot;,
+    &quot;project.structure.proportion&quot;: &quot;0.15&quot;,
+    &quot;project.structure.side.proportion&quot;: &quot;0.2&quot;,
+    &quot;run.configurations.included.in.services&quot;: &quot;true&quot;,
+    &quot;settings.editor.selected.configurable&quot;: &quot;advanced.settings&quot;,
+    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;
   }
-}]]></component>
+}</component>
   <component name="ReactorSettings">
     <option name="notificationShown" value="true" />
   </component>
@@ -255,7 +254,7 @@
       <workItem from="1728745021087" duration="100000" />
       <workItem from="1728745266607" duration="980000" />
       <workItem from="1728907036529" duration="12292000" />
-      <workItem from="1728919531557" duration="1019000" />
+      <workItem from="1728919531557" duration="2269000" />
     </task>
     <task id="LOCAL-00001" summary="init commit">
       <option name="closed" value="true" />
@@ -529,7 +528,15 @@
       <option name="project" value="LOCAL" />
       <updated>1728919725566</updated>
     </task>
-    <option name="localTasksCounter" value="35" />
+    <task id="LOCAL-00035" summary="Some fixes(part don't work)">
+      <option name="closed" value="true" />
+      <created>1728920618795</created>
+      <option name="number" value="00035" />
+      <option name="presentableId" value="LOCAL-00035" />
+      <option name="project" value="LOCAL" />
+      <updated>1728920618795</updated>
+    </task>
+    <option name="localTasksCounter" value="36" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
Index: hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hospitalmicroservice.config;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\n@Configuration\r\npublic class SecurityConfiguration {\r\n    private final JwtFilter jwtFilter;\r\n    private final CustomAuthenticationEntryPoint customAuthenticationEntryPoint;\r\n    private final CustomAccessDeniedHandler customAccessDeniedHandler;\r\n\r\n    @Bean\r\n    public SecurityFilterChain hospitalFilterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests(auth -> auth\r\n                        .requestMatchers(\r\n                                \"/swagger-ui/**\",\r\n                                \"/swagger-resources/*\",\r\n                                \"/v3/api-docs/**\",\r\n                                \"/webjars/**\",\r\n                                \"/api/Hospitals/**\")\r\n                        .permitAll()\r\n                )\r\n                .exceptionHandling(exception -> exception\r\n                        .authenticationEntryPoint(customAuthenticationEntryPoint)\r\n                        .accessDeniedHandler(customAccessDeniedHandler)\r\n                )\r\n                .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        return http.build();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java
--- a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java	(revision 81d0268218d4226a69595a554e3f3e45afb58405)
+++ b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/config/SecurityConfiguration.java	(date 1728921494289)
@@ -28,9 +28,10 @@
                                 "/swagger-ui/**",
                                 "/swagger-resources/*",
                                 "/v3/api-docs/**",
-                                "/webjars/**",
-                                "/api/Hospitals/**")
+                                "/webjars/**"
+                                )
                         .permitAll()
+                        .requestMatchers("/api/Hospitals/**").authenticated()
                 )
                 .exceptionHandling(exception -> exception
                         .authenticationEntryPoint(customAuthenticationEntryPoint)
Index: hospital-microservice/src/main/java/com/example/hospitalmicroservice/controller/HospitalController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hospitalmicroservice.controller;\r\n\r\nimport com.example.hospitalmicroservice.dto.HosptialResponse;\r\nimport com.example.hospitalmicroservice.exception.ControllerExceptionHandler;\r\nimport com.example.hospitalmicroservice.service.HospitalService;\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.security.access.prepost.PreAuthorize;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(\"/api/Hospitals\")\r\n@AllArgsConstructor\r\n@ControllerExceptionHandler\r\npublic class HospitalController {\r\n    private final HospitalService hospitalService;\r\n\r\n    @GetMapping()\r\n    @ResponseStatus(HttpStatus.ACCEPTED)\r\n    @PreAuthorize(\"isAuthenticated()\")\r\n    private List<HosptialResponse> getHospitals(@RequestParam Integer from, @RequestParam Integer count) {\r\n        return hospitalService.getHospitals(from, count);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/controller/HospitalController.java b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/controller/HospitalController.java
--- a/hospital-microservice/src/main/java/com/example/hospitalmicroservice/controller/HospitalController.java	(revision 81d0268218d4226a69595a554e3f3e45afb58405)
+++ b/hospital-microservice/src/main/java/com/example/hospitalmicroservice/controller/HospitalController.java	(date 1728921912667)
@@ -19,7 +19,6 @@
 
     @GetMapping()
     @ResponseStatus(HttpStatus.ACCEPTED)
-    @PreAuthorize("isAuthenticated()")
     private List<HosptialResponse> getHospitals(@RequestParam Integer from, @RequestParam Integer count) {
         return hospitalService.getHospitals(from, count);
     }
Index: account-microservice/src/main/java/com/example/accountmicroservice/config/RabbitMQConfiguration.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.accountmicroservice.config;\r\n\r\n\r\nimport org.springframework.amqp.core.Binding;\r\nimport org.springframework.amqp.core.BindingBuilder;\r\nimport org.springframework.amqp.core.Queue;\r\nimport org.springframework.amqp.core.TopicExchange;\r\nimport org.springframework.amqp.rabbit.connection.ConnectionFactory;\r\nimport org.springframework.amqp.rabbit.core.RabbitTemplate;\r\nimport org.springframework.amqp.support.converter.Jackson2JsonMessageConverter;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class RabbitMQConfiguration {\r\n    @Bean\r\n    public TopicExchange authExchange() {\r\n        return new TopicExchange(\"authExchange\");\r\n    }\r\n\r\n    @Bean\r\n    public Queue authRequestQueue() {\r\n        return new Queue(\"authRequestQueue\", true);\r\n    }\r\n\r\n    @Bean\r\n    public Queue authResponseQueue() {\r\n        return new Queue(\"authResponseQueue\", true);\r\n    }\r\n\r\n    @Bean\r\n    public Binding bindingAuthRequest(Queue authRequestQueue, TopicExchange authExchange) {\r\n        return BindingBuilder.bind(authRequestQueue).to(authExchange).with(\"auth.request\");\r\n    }\r\n\r\n    @Bean\r\n    public Binding bindingAuthResponse(Queue authResponseQueue, TopicExchange authExchange) {\r\n        return BindingBuilder.bind(authResponseQueue).to(authExchange).with(\"auth.response\");\r\n    }\r\n    @Bean\r\n    public Jackson2JsonMessageConverter jsonMessageConverter() {\r\n        return new Jackson2JsonMessageConverter();\r\n    }\r\n\r\n    @Bean\r\n    public RabbitTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\r\n        RabbitTemplate template = new RabbitTemplate(connectionFactory);\r\n        template.setMessageConverter(jsonMessageConverter());\r\n        return template;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/account-microservice/src/main/java/com/example/accountmicroservice/config/RabbitMQConfiguration.java b/account-microservice/src/main/java/com/example/accountmicroservice/config/RabbitMQConfiguration.java
--- a/account-microservice/src/main/java/com/example/accountmicroservice/config/RabbitMQConfiguration.java	(revision 8feb7e79a56314f1437af9cc60a2064040cb998f)
+++ b/account-microservice/src/main/java/com/example/accountmicroservice/config/RabbitMQConfiguration.java	(date 1728922061471)
@@ -37,6 +37,7 @@
     public Binding bindingAuthResponse(Queue authResponseQueue, TopicExchange authExchange) {
         return BindingBuilder.bind(authResponseQueue).to(authExchange).with("auth.response");
     }
+
     @Bean
     public Jackson2JsonMessageConverter jsonMessageConverter() {
         return new Jackson2JsonMessageConverter();
